{% extends "auctions/layout.html" %} {% block body %}
<h2>Your Watchlist</h2>

{% if messages %} {% for message in messages %}
<div class="alert alert-{{ message.tags }}">{{ message }}</div>
{% endfor %} {% endif %}

<div class="row">
  {% for listing in listings %}
  <div class="col-lg-4 col-md-6 mb-4">
    <div class="card h-100">
      {% if listing.imageUrl %}
      <a href="{% url 'listing' listing.id %}">
        <img
          class="card-img-top"
          src="{{ listing.imageUrl }}"
          alt="{{ listing.title }}"
          style="height: 200px; object-fit: cover"
        />
      </a>
      {% endif %}
      <div class="card-body">
        <h4 class="card-title">
          <a href="{% url 'listing' listing.listing.id %}">{{ listing.listing.title }}</a>
        </h4>
        <p class="card-text">{{ listing.listing.description|truncatechars:100 }}</p>
        <h5 class="card-price">
          {% if listing.isActive %}
              Active Price: ${{ listing.current_price }}
          {% else %}
              Closed Price: ${{ listing.current_price }}
          {% endif %}
        </h5>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12">
    <p>No listings in your watchlist.</p>
  </div>
  {% endfor %}
</div>

{% endblock %}
